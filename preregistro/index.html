<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Preregistro · Legend Card Game</title>

  <!-- Estilos locales -->
  <link rel="stylesheet" href="./styles.css">
  <link rel="stylesheet" href="./menu.css">

  <!-- Estilos globales (debe ir al final para que tenga prioridad) -->
  <link rel="stylesheet" href="/Web/main.css">
  <link rel="stylesheet" href="/Web/styles.css?v=2">
</head>
<body>
  <!-- Header reutilizable -->
  <div id="site-header"></div>

  <!-- Marca de agua global -->
  <div class="watermark"></div>

  <!-- Contenido del menú -->
  <div class="menu-wrap container">
    <!-- Hero: Evento principal -->
    <section id="heroSlot"></section>

    <!-- Botón de Status -->
    <section class="status-container">
      <a class="btn-hex" href="./utilities/consulta.html" aria-label="Status De Registro">
        <span>Status De Registro</span>
      </a>
    </section>

    <!-- Grid de side events (6 botones-imagen) -->
    <section>
      <div id="gridSlot" class="grid-cards"></div>
    </section>
  </div>

  <!-- Footer reutilizable -->
  <div id="site-footer"></div>

  <!-- Loader para header/footer -->
  <script src="/Web/assets/js/layout-loader.js"></script>

  <!-- JS del menú -->
  <script type="module" src="./menu.js"></script>

  <!-- Memoria de pestaña activa: Eventos -->
  <script>
    (function () {
      const KEY = 'lcg-tab';
      const VALUE = 'preregistro'; // clave del tab "Eventos"

      function markActive() {
        const nav = document.getElementById('bottomNav');
        if (!nav) { setTimeout(markActive, 60); return; }
        nav.querySelectorAll('.nav-item').forEach(a => {
          a.classList.toggle('active', a.dataset.key === VALUE);
        });
      }

      // Guarda memoria y marca activo al cargar
      localStorage.setItem(KEY, VALUE);
      markActive();

      // Mantener memoria al navegar a páginas de evento
      document.addEventListener('click', (e) => {
        const a = e.target.closest('a[href]');
        if (!a) return;
        const href = a.getAttribute('href') || '';
        if (/regional\/evento\.html/i.test(href)) {
          localStorage.setItem(KEY, VALUE);
        }
      });

      // Defensa adicional en navegaciones del historial
      window.addEventListener('pageshow', () => {
        if (localStorage.getItem(KEY) !== VALUE) {
          localStorage.setItem(KEY, VALUE);
        }
        markActive();
      });
    })();
  </script>
</body>
</html>
