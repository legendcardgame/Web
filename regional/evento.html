<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Evento · Legend Card Game</title>

  <!-- Estilos locales/globales existentes -->
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="/Web/main.css">
  <link rel="stylesheet" href="/Web/styles.css">

  <style>
    :root{
      --card-bg:#111;
      --card-border:rgba(255,255,255,.08);
    }
    .ev-wrap{max-width:960px;margin:0 auto;padding:20px 16px 100px}

    /* Banner */
    .ev-hero{position:relative;border-radius:18px;overflow:hidden;background:#111;box-shadow:0 10px 40px rgba(0,0,0,.4)}
    .ev-hero img{width:100%;height:auto;display:block}

    /* Cards */
    .ev-card{
      background:var(--card-bg);
      border:1px solid var(--card-border);
      border-radius:16px; padding:14px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      margin-top:16px;
    }
    .ev-card h3{margin:.2rem 0 .7rem;font-size:1.05rem;opacity:.95;text-align:center}

    .ev-desc{line-height:1.65;opacity:.97;text-align:left}

    /* CTA hex rojo */
    .cta-center{display:flex;justify-content:center;margin-top:12px}
    .btn-hex{
      --hex-bg1:#e00119; --hex-bg2:#a80012; --hex-shadow:#002f5a;
      position:relative; display:inline-flex; align-items:center; justify-content:center;
      padding:12px 28px; min-width:220px; color:#fff; font-weight:800; text-decoration:none;
      background:linear-gradient(180deg,var(--hex-bg1),var(--hex-bg2));
      filter:drop-shadow(0 6px 16px rgba(0,0,0,.35)) drop-shadow(0 0 10px var(--hex-shadow));
      transition:transform .15s ease, filter .25s ease;
      clip-path:polygon(10% 0, 90% 0, 100% 50%, 90% 100%, 10% 100%, 0 50%);
    }
    .btn-hex:hover{transform:translateY(-2px); filter:drop-shadow(0 10px 24px rgba(0,0,0,.5)) drop-shadow(0 0 14px var(--hex-shadow));}

    /* Info 2x2 */
    .ev-info{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;justify-items:center}
    .info-cell{
      width:100%;max-width:360px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);
      border-radius:12px;padding:10px;display:flex;flex-direction:column;align-items:center;justify-content:center;
      min-height:88px;text-align:center;
    }
    .muted{opacity:.68}
    .ev-price{font-size:1.15rem;font-weight:800}
    @media (max-width:700px){ .ev-info{grid-template-columns:1fr} .info-cell{max-width:560px} }

    /* Mapa */
    .map-wrap{
      position:relative; padding-bottom:56.25%; height:0; overflow:hidden;
      border-radius:12px; border:1px solid rgba(255,255,255,.08);
      box-shadow:0 10px 30px rgba(0,0,0,.35);
      max-width:920px; margin:0 auto;
    }
    .map-wrap iframe{ position:absolute; inset:0; width:100%; height:100%; border:0; }

    .btn-open-maps-wrap{ display:flex; justify-content:center; margin:.9rem 0 0; }
    .btn-open-maps{ min-width:unset; padding:.6rem 1rem; clip-path:none; border-radius:10px; }

    /* Imagen de premios (1920×1080, responsiva) */
    .ev-prize{margin-top:16px;border-radius:14px;overflow:hidden;box-shadow:0 8px 28px rgba(0,0,0,.4)}
    .ev-prize img{width:100%;max-width:1920px;height:auto;display:block;margin:0 auto}
  </style>
</head>
<body>

  <!-- Header/Bottom-nav reutilizables -->
  <div id="site-header"></div>
  <script src="/Web/assets/js/nav-active.js"></script>

  <div class="watermark"></div>

  <div class="ev-wrap container">
    <!-- 🔻 Se eliminó el título superior -->

    <!-- Banner -->
    <div class="ev-hero"><img id="evBanner" alt="Banner del evento"></div>

    <!-- Descripción + CTA + Imagen de premios -->
    <section class="ev-card">
      <h3>Descripción</h3>
      <div class="ev-desc" id="evDesc">—</div>

      <!-- Imagen de premios (debajo de la descripción) -->
      <div class="ev-prize">
        <img id="evPrize" alt="Premios del evento" loading="lazy">
      </div>

      <div class="cta-center">
        <a id="evBtnPrereg" class="btn-hex" href="#" target="_self"><span>Preregístrate ahora</span></a>
      </div>
    </section>

    <!-- Información -->
    <section class="ev-card">
      <h3>Información</h3>
      <div class="ev-info">
        <div class="info-cell">
          <div class="muted">Costo</div>
          <div class="ev-price" id="evCost">—</div>
        </div>
        <div class="info-cell">
          <div class="muted">Incluye</div>
          <div id="evIncluye">—</div>
        </div>
        <div class="info-cell">
          <div class="muted">Modalidad</div>
          <div id="evDate">—</div>
        </div>
        <div class="info-cell">
          <div class="muted">Formato</div>
          <div id="evFormato">—</div>
        </div>
      </div>
    </section>

    <!-- Mapa (centrado, sin título “Sede”) -->
    <section class="ev-card" style="text-align:center;">
      <div class="map-wrap">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3763.210823486798!2d-98.203949!3d19.073506!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85cfc0aeb8a57c33%3A0x1c5679dd7b98c1d2!2sHotel%20Plaza%20Poblana!5e0!3m2!1ses-419!2smx!4v1734567890123"
          loading="lazy" allowfullscreen referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
      <div class="btn-open-maps-wrap">
        <a class="btn-hex btn-open-maps" target="_blank" href="https://maps.app.goo.gl/9QF6yTtPtDuUg3MQA">
          Abrir en Google Maps
        </a>
      </div>
    </section>
  </div>

  <!-- Footer -->
  <div id="site-footer"></div>

  <!-- Catálogo de eventos -->
  <script src="./eventos.js"></script>
  <!-- Loader header/footer -->
  <script src="/Web/assets/js/layout-loader.js"></script>

  <script>
    (function(){
      const params = new URLSearchParams(location.search);
      const id = (params.get('id') || '').toLowerCase();
      const ev = (window.LCG_EVENTS || []).find(e => e.id === id);

      const evBanner = document.getElementById('evBanner');
      const evDesc   = document.getElementById('evDesc');
      const evCost   = document.getElementById('evCost');
      const evDate   = document.getElementById('evDate');
      const evIncl   = document.getElementById('evIncluye');
      const evFmt    = document.getElementById('evFormato');
      const evPrize  = document.getElementById('evPrize');
      const evBtn    = document.getElementById('evBtnPrereg');

      if (ev) {
        document.title = ev.nombre + ' · Legend Card Game';
        evDesc.textContent  = ev.descripcion || '—';
        evBanner.src        = ev.banner;
        evBanner.alt        = 'Banner ' + ev.nombre;

        evCost.textContent = ev.costo   || '—';
        evDate.textContent = ev.fecha   || 'Por confirmar';
        evIncl.textContent = ev.incluye || '—';
        evFmt.textContent  = ev.formato || '—';

        // Imagen de premios: Web/regional/premios/p-<id>.(jpg|png|webp), con fallback
        const base = `/Web/regional/premios/p-${id}`;
        const exts = ['.jpg','.png','.webp'];
        let i = 0;
        const tryNext = () => {
          if (i >= exts.length) { evPrize.style.display = 'none'; return; }
          evPrize.src = base + exts[i++];
        };
        evPrize.addEventListener('error', tryNext);
        tryNext(); // primer intento

        // Botón de preregistro (se oculta para algunos eventos)
        const NO_PREREG = ["dragon-duel", "win-a-mat", "master-duel"];
        if (NO_PREREG.includes(ev.id)) {
          document.querySelector(".cta-center").style.display = "none";
        } else {
          evBtn.href = '/Web/preregistro/utilities/preregistro.html?evento=' + encodeURIComponent(ev.id);
        }
      } else {
        evDesc.textContent = 'Evento no encontrado. Verifica el enlace o regresa al inicio.';
        document.querySelector(".cta-center").style.display = "none";
        document.querySelector(".ev-hero").style.display = "none";
      }
    })();
  </script>
</body>
</html>
